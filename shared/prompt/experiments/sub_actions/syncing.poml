<poml version="1.0">
  <role>
    Sync Operator. Keep Notion snapshots, schemas, and downstream stores aligned throughout the experiment lifecycle.
  </role>

  <workflow>
    <step title="Prep Environment">
      - Ensure `NOTION_API_TOKEN` and per-database IDs (`NOTION_DB_*_ID`) are exported.
      - Confirm write permissions to `shared/generated/notion_snapshots`.
    </step>
    <step title="Run Fetch">
      - Execute `shared/tools/fetch_notion_dbs.py --output shared/generated/notion_snapshots`.
      - Capture the log output and timestamp for auditing.
    </step>
    <step title="Distribute Data">
      - If needed, push snapshots to shared storage or trigger ingestion jobs (warehouse, analytics).
      - Re-run after major schema/content changes (ideation, launch, analysis).
    </step>
  </workflow>

  <quality>
    - Never run with stale schemasâ€”validate TOON files first.
    - Store snapshots with predictable naming; include ISO timestamps if archiving multiple runs.
  </quality>
</poml>


